{
  "openrpc": "1.2.6",
  "info": {
    "title": "HeroLib Circles Mail API",
    "description": "API for Mail functionality of HeroLib Circles MCC module. This API provides endpoints for managing emails.",
    "version": "1.0.0",
    "contact": {
      "name": "FreeFlow Universe",
      "url": "https://freeflowuniverse.org"
    }
  },
  "servers": [
    {
      "url": "https://api.example.com/v1",
      "name": "Production server"
    },
    {
      "url": "https://dev-api.example.com/v1",
      "name": "Development server"
    }
  ],
  "methods": [
    {
      "name": "listEmails",
      "summary": "List all emails",
      "description": "Returns a list of all emails in the system",
      "params": [
        {
          "name": "mailbox",
          "description": "Filter emails by mailbox",
          "required": false,
          "schema": {
            "type": "string"
          }
        }
      ],
      "result": {
        "name": "emails",
        "description": "A list of emails",
        "schema": {
          "type": "array",
          "items": {
            "$ref": "#/components/schemas/Email"
          }
        },
        "examples": [
          {
            "name": "listEmails",
            "value": [
              {
                "id": 1,
                "uid": 101,
                "seq_num": 1,
                "mailbox": "INBOX",
                "message": "Hello, this is a test email.",
                "attachments": [],
                "flags": ["\\Seen"],
                "internal_date": 1647356400,
                "size": 256,
                "envelope": {
                  "date": 1647356400,
                  "subject": "Test Email",
                  "from": ["sender@example.com"],
                  "sender": ["sender@example.com"],
                  "reply_to": ["sender@example.com"],
                  "to": ["recipient@example.com"],
                  "cc": [],
                  "bcc": [],
                  "in_reply_to": "",
                  "message_id": "<abc123@example.com>"
                }
              },
              {
                "id": 2,
                "uid": 102,
                "seq_num": 2,
                "mailbox": "INBOX",
                "message": "This is another test email with an attachment.",
                "attachments": [
                  {
                    "filename": "document.pdf",
                    "content_type": "application/pdf",
                    "data": "base64encodeddata"
                  }
                ],
                "flags": [],
                "internal_date": 1647442800,
                "size": 1024,
                "envelope": {
                  "date": 1647442800,
                  "subject": "Email with Attachment",
                  "from": ["sender2@example.com"],
                  "sender": ["sender2@example.com"],
                  "reply_to": ["sender2@example.com"],
                  "to": ["recipient@example.com"],
                  "cc": ["cc@example.com"],
                  "bcc": [],
                  "in_reply_to": "",
                  "message_id": "<def456@example.com>"
                }
              }
            ]
          }
        ]
      }
    },
    {
      "name": "createEmail",
      "summary": "Create a new email",
      "description": "Creates a new email in the system",
      "params": [
        {
          "name": "data",
          "description": "Email data to create",
          "required": true,
          "schema": {
            "$ref": "#/components/schemas/EmailCreate"
          },
          "examples": [
            {
              "name": "createEmail",
              "value": {
                "mailbox": "INBOX",
                "message": "This is a new email message.",
                "attachments": [],
                "flags": [],
                "envelope": {
                  "subject": "New Email",
                  "from": ["sender@example.com"],
                  "to": ["recipient@example.com"],
                  "cc": [],
                  "bcc": []
                }
              }
            }
          ]
        }
      ],
      "result": {
        "name": "email",
        "description": "The created email",
        "schema": {
          "$ref": "#/components/schemas/Email"
        },
        "examples": [
          {
            "name": "createdEmail",
            "value": {
              "id": 3,
              "uid": 103,
              "seq_num": 3,
              "mailbox": "INBOX",
              "message": "This is a new email message.",
              "attachments": [],
              "flags": [],
              "internal_date": 1647529200,
              "size": 128,
              "envelope": {
                "date": 1647529200,
                "subject": "New Email",
                "from": ["sender@example.com"],
                "sender": ["sender@example.com"],
                "reply_to": ["sender@example.com"],
                "to": ["recipient@example.com"],
                "cc": [],
                "bcc": [],
                "in_reply_to": "",
                "message_id": "<ghi789@example.com>"
              }
            }
          }
        ]
      }
    },
    {
      "name": "getEmailById",
      "summary": "Get email by ID",
      "description": "Returns a single email by ID",
      "params": [
        {
          "name": "id",
          "description": "ID of the email to retrieve",
          "required": true,
          "schema": {
            "type": "integer",
            "format": "uint32"
          }
        }
      ],
      "result": {
        "name": "email",
        "description": "The requested email",
        "schema": {
          "$ref": "#/components/schemas/Email"
        },
        "examples": [
          {
            "name": "emailById",
            "value": {
              "id": 1,
              "uid": 101,
              "seq_num": 1,
              "mailbox": "INBOX",
              "message": "Hello, this is a test email.",
              "attachments": [],
              "flags": ["\\Seen"],
              "internal_date": 1647356400,
              "size": 256,
              "envelope": {
                "date": 1647356400,
                "subject": "Test Email",
                "from": ["sender@example.com"],
                "sender": ["sender@example.com"],
                "reply_to": ["sender@example.com"],
                "to": ["recipient@example.com"],
                "cc": [],
                "bcc": [],
                "in_reply_to": "",
                "message_id": "<abc123@example.com>"
              }
            }
          }
        ]
      }
    },
    {
      "name": "updateEmail",
      "summary": "Update email",
      "description": "Updates an existing email",
      "params": [
        {
          "name": "id",
          "description": "ID of the email to update",
          "required": true,
          "schema": {
            "type": "integer",
            "format": "uint32"
          }
        },
        {
          "name": "data",
          "description": "Updated email data",
          "required": true,
          "schema": {
            "$ref": "#/components/schemas/EmailUpdate"
          },
          "examples": [
            {
              "name": "updateEmail",
              "value": {
                "mailbox": "INBOX",
                "message": "This is an updated email message.",
                "attachments": [],
                "flags": ["\\Seen"],
                "envelope": {
                  "subject": "Updated Email",
                  "from": ["sender@example.com"],
                  "to": ["recipient@example.com"],
                  "cc": ["cc@example.com"],
                  "bcc": []
                }
              }
            }
          ]
        }
      ],
      "result": {
        "name": "email",
        "description": "The updated email",
        "schema": {
          "$ref": "#/components/schemas/Email"
        },
        "examples": [
          {
            "name": "updatedEmail",
            "value": {
              "id": 1,
              "uid": 101,
              "seq_num": 1,
              "mailbox": "INBOX",
              "message": "This is an updated email message.",
              "attachments": [],
              "flags": ["\\Seen"],
              "internal_date": 1647356400,
              "size": 300,
              "envelope": {
                "date": 1647356400,
                "subject": "Updated Email",
                "from": ["sender@example.com"],
                "sender": ["sender@example.com"],
                "reply_to": ["sender@example.com"],
                "to": ["recipient@example.com"],
                "cc": ["cc@example.com"],
                "bcc": [],
                "in_reply_to": "",
                "message_id": "<abc123@example.com>"
              }
            }
          }
        ]
      }
    },
    {
      "name": "deleteEmail",
      "summary": "Delete email",
      "description": "Deletes an email",
      "params": [
        {
          "name": "id",
          "description": "ID of the email to delete",
          "required": true,
          "schema": {
            "type": "integer",
            "format": "uint32"
          }
        }
      ],
      "result": {
        "name": "success",
        "description": "Success status",
        "schema": {
          "type": "null"
        }
      }
    },
    {
      "name": "searchEmails",
      "summary": "Search emails",
      "description": "Search for emails by various criteria",
      "params": [
        {
          "name": "subject",
          "description": "Search in email subject",
          "required": false,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "from",
          "description": "Search in from field",
          "required": false,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "to",
          "description": "Search in to field",
          "required": false,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "content",
          "description": "Search in email content",
          "required": false,
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "date_from",
          "description": "Filter by date from (Unix timestamp)",
          "required": false,
          "schema": {
            "type": "integer",
            "format": "int64"
          }
        },
        {
          "name": "date_to",
          "description": "Filter by date to (Unix timestamp)",
          "required": false,
          "schema": {
            "type": "integer",
            "format": "int64"
          }
        },
        {
          "name": "has_attachments",
          "description": "Filter by presence of attachments",
          "required": false,
          "schema": {
            "type": "boolean"
          }
        }
      ],
      "result": {
        "name": "emails",
        "description": "Search results",
        "schema": {
          "type": "array",
          "items": {
            "$ref": "#/components/schemas/Email"
          }
        },
        "examples": [
          {
            "name": "searchResults",
            "value": [
              {
                "id": 1,
                "uid": 101,
                "seq_num": 1,
                "mailbox": "INBOX",
                "message": "Hello, this is a test email with search terms.",
                "attachments": [],
                "flags": ["\\Seen"],
                "internal_date": 1647356400,
                "size": 256,
                "envelope": {
                  "date": 1647356400,
                  "subject": "Test Email Search",
                  "from": ["sender@example.com"],
                  "sender": ["sender@example.com"],
                  "reply_to": ["sender@example.com"],
                  "to": ["recipient@example.com"],
                  "cc": [],
                  "bcc": [],
                  "in_reply_to": "",
                  "message_id": "<abc123@example.com>"
                }
              }
            ]
          }
        ]
      }
    },
    {
      "name": "getEmailsByMailbox",
      "summary": "Get emails by mailbox",
      "description": "Returns all emails in a specific mailbox",
      "params": [
        {
          "name": "mailbox",
          "description": "Name of the mailbox",
          "required": true,
          "schema": {
            "type": "string"
          }
        }
      ],
      "result": {
        "name": "emails",
        "description": "Emails in the mailbox",
        "schema": {
          "type": "array",
          "items": {
            "$ref": "#/components/schemas/Email"
          }
        },
        "examples": [
          {
            "name": "mailboxEmails",
            "value": [
              {
                "id": 1,
                "uid": 101,
                "seq_num": 1,
                "mailbox": "INBOX",
                "message": "Hello, this is a test email.",
                "attachments": [],
                "flags": ["\\Seen"],
                "internal_date": 1647356400,
                "size": 256,
                "envelope": {
                  "date": 1647356400,
                  "subject": "Test Email",
                  "from": ["sender@example.com"],
                  "sender": ["sender@example.com"],
                  "reply_to": ["sender@example.com"],
                  "to": ["recipient@example.com"],
                  "cc": [],
                  "bcc": [],
                  "in_reply_to": "",
                  "message_id": "<abc123@example.com>"
                }
              },
              {
                "id": 2,
                "uid": 102,
                "seq_num": 2,
                "mailbox": "INBOX",
                "message": "This is another test email with an attachment.",
                "attachments": [
                  {
                    "filename": "document.pdf",
                    "content_type": "application/pdf",
                    "data": "base64encodeddata"
                  }
                ],
                "flags": [],
                "internal_date": 1647442800,
                "size": 1024,
                "envelope": {
                  "date": 1647442800,
                  "subject": "Email with Attachment",
                  "from": ["sender2@example.com"],
                  "sender": ["sender2@example.com"],
                  "reply_to": ["sender2@example.com"],
                  "to": ["recipient@example.com"],
                  "cc": ["cc@example.com"],
                  "bcc": [],
                  "in_reply_to": "",
                  "message_id": "<def456@example.com>"
                }
              }
            ]
          }
        ]
      }
    },
    {
      "name": "updateEmailFlags",
      "summary": "Update email flags",
      "description": "Update the flags of an email by its UID",
      "params": [
        {
          "name": "uid",
          "description": "UID of the email to update flags",
          "required": true,
          "schema": {
            "type": "integer",
            "format": "uint32"
          }
        },
        {
          "name": "data",
          "description": "Flag update data",
          "required": true,
          "schema": {
            "$ref": "#/components/schemas/UpdateEmailFlags"
          },
          "examples": [
            {
              "name": "updateFlags",
              "value": {
                "flags": ["\\Seen", "\\Flagged"]
              }
            }
          ]
        }
      ],
      "result": {
        "name": "email",
        "description": "The email with updated flags",
        "schema": {
          "$ref": "#/components/schemas/Email"
        },
        "examples": [
          {
            "name": "updatedFlags",
            "value": {
              "id": 1,
              "uid": 101,
              "seq_num": 1,
              "mailbox": "INBOX",
              "message": "Hello, this is a test email.",
              "attachments": [],
              "flags": ["\\Seen", "\\Flagged"],
              "internal_date": 1647356400,
              "size": 256,
              "envelope": {
                "date": 1647356400,
                "subject": "Test Email",
                "from": ["sender@example.com"],
                "sender": ["sender@example.com"],
                "reply_to": ["sender@example.com"],
                "to": ["recipient@example.com"],
                "cc": [],
                "bcc": [],
                "in_reply_to": "",
                "message_id": "<abc123@example.com>"
              }
            }
          }
        ]
      }
    }
  ],
  "components": {
    "schemas": {
      "Email": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "uint32",
            "description": "Unique identifier for the email"
          },
          "uid": {
            "type": "integer",
            "format": "uint32",
            "description": "IMAP UID of the email"
          },
          "seq_num": {
            "type": "integer",
            "format": "uint32",
            "description": "Sequence number of the email"
          },
          "mailbox": {
            "type": "string",
            "description": "Mailbox the email belongs to"
          },
          "message": {
            "type": "string",
            "description": "Content of the email"
          },
          "attachments": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Attachment"
            },
            "description": "List of attachments"
          },
          "flags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Email flags"
          },
          "internal_date": {
            "type": "integer",
            "format": "int64",
            "description": "Internal date of the email (Unix timestamp)"
          },
          "size": {
            "type": "integer",
            "format": "uint32",
            "description": "Size of the email in bytes"
          },
          "envelope": {
            "$ref": "#/components/schemas/Envelope",
            "description": "Email envelope information"
          }
        },
        "required": ["id", "uid", "mailbox", "message", "envelope"]
      },
      "EmailCreate": {
        "type": "object",
        "properties": {
          "mailbox": {
            "type": "string",
            "description": "Mailbox to create the email in"
          },
          "message": {
            "type": "string",
            "description": "Content of the email"
          },
          "attachments": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Attachment"
            },
            "description": "List of attachments"
          },
          "flags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Email flags"
          },
          "envelope": {
            "$ref": "#/components/schemas/EnvelopeCreate",
            "description": "Email envelope information"
          }
        },
        "required": ["mailbox", "message", "envelope"]
      },
      "EmailUpdate": {
        "type": "object",
        "properties": {
          "mailbox": {
            "type": "string",
            "description": "Mailbox to move the email to"
          },
          "message": {
            "type": "string",
            "description": "Updated content of the email"
          },
          "attachments": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Attachment"
            },
            "description": "Updated list of attachments"
          },
          "flags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Updated email flags"
          },
          "envelope": {
            "$ref": "#/components/schemas/EnvelopeCreate",
            "description": "Updated email envelope information"
          }
        }
      },
      "Attachment": {
        "type": "object",
        "properties": {
          "filename": {
            "type": "string",
            "description": "Name of the attachment file"
          },
          "content_type": {
            "type": "string",
            "description": "MIME type of the attachment"
          },
          "data": {
            "type": "string",
            "description": "Base64 encoded attachment data"
          }
        },
        "required": ["filename", "content_type", "data"]
      },
      "Envelope": {
        "type": "object",
        "properties": {
          "date": {
            "type": "integer",
            "format": "int64",
            "description": "Date of the email (Unix timestamp)"
          },
          "subject": {
            "type": "string",
            "description": "Subject of the email"
          },
          "from": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "From addresses"
          },
          "sender": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Sender addresses"
          },
          "reply_to": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Reply-To addresses"
          },
          "to": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "To addresses"
          },
          "cc": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "CC addresses"
          },
          "bcc": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "BCC addresses"
          },
          "in_reply_to": {
            "type": "string",
            "description": "Message ID this email is replying to"
          },
          "message_id": {
            "type": "string",
            "description": "Unique message ID"
          }
        },
        "required": ["date", "subject", "from", "to"]
      },
      "EnvelopeCreate": {
        "type": "object",
        "properties": {
          "subject": {
            "type": "string",
            "description": "Subject of the email"
          },
          "from": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "From addresses"
          },
          "to": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "To addresses"
          },
          "cc": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "CC addresses"
          },
          "bcc": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "BCC addresses"
          }
        },
        "required": ["subject", "from", "to"]
      },
      "UpdateEmailFlags": {
        "type": "object",
        "properties": {
          "flags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "New flags to set on the email"
          }
        },
        "required": ["flags"]
      }
    }
  }
}
